{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport async function getImages(query, currentPage) {\n    const BASE_URL = 'https://pixabay.com/api/';\n    const url = 'https://pixabay.com/api/';\n    const params = {\n        key: \"43044208-9f5714c3237b37b2f1db9f248\",\n        q: query,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        page: currentPage,\n        per_page: 15,\n    };\n\n    const res = await axios.get(url, { params });\n    return res.data;\n    }","import { imageGallery } from \"../main\";\n\nfunction imageTemplate(image) {\n    return `<li class=\"image-item\">\n           <a class=\"image-link\" href=\"${image.largeImageURL}\">\n             <img\n               class=\"image-photo\"\n               width=\"360\"\n               height=\"152\"\n               src=\"${image.webformatURL}\"\n               data-source=\"${image.largeImageURL}\"\n               alt=\"${image.tags}\"\n             />\n             </a>\n             <ul class=\"image-description\">\n             <li><h3>Likes</h3><p>${image.likes}</p>\n             </li>\n             <li><h3>Views</h3><p>${image.views}</p>\n               </li>\n               <li><h3>Comments</h3><p>${image.comments}</p>\n                 </li>\n                 <li><h3>Downloads</h3><p>${image.downloads}</p>\n                   </li>\n             </ul>\n           </li>`;\n}\n\nfunction imagesTemplate(arr) {\n    return arr.map(imageTemplate).join('');\n}\n\nexport function renderGallery(arr){\n    const markup = imagesTemplate(arr);\n    console.log(markup);\n    imageGallery.insertAdjacentHTML('beforeend', markup);\n};\n\n","import axios from 'axios';\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { getImages } from './js/pixabay-api';\nimport { renderGallery } from './js/render-functions';\n\nconst inputForm = document.querySelector('.form');\nexport const imageGallery = document.querySelector('.gallery');\nconst imagePreload = document.querySelector('.loader');\nconst btnLoadMore = document.querySelector('.btn-load');\n\nlet query;\nlet currentPage = 1;\nlet maxPage = 0;\nconst pageSize = 15;\n\nconst lightbox = new SimpleLightbox('.gallery a', { \n    captionsData: 'alt',\n    captionDelay: 250,\n});\n\nfunction showLoadMore() {\n    btnLoadMore.classList.remove('is-hidden');\n}\nfunction hideLoadMore() {\n    btnLoadMore.classList.add('is-hidden');\n}\n\nfunction showLoader() {\n    imagePreload.classList.remove('is-hidden');\n}\nfunction hideLoader() {\n    imagePreload.classList.add('is-hidden');\n}\n\n\ninputForm.addEventListener('submit', onFormSubmit)\nbtnLoadMore.addEventListener('click', onLoadMoreClick)\n\nasync function onFormSubmit(event){\n    event.preventDefault();\n    query = event.target.elements.image.value.trim();\n    imageGallery.innerHTML = '';\n    currentPage = 1;\n    if(!query){\n        iziToast.error({\n            title: 'Error',\n            position: 'topRight',\n            color: '#EF4040',\n            messageColor: '#FAFAFB',\n            maxWidth: '432px',\n            height: '88',\n            message: 'Please, fill the form!',\n        })\n        return;\n    }\n    try {\n        showLoader();    \n    const data = await getImages(query, currentPage);\n    maxPage = Math.ceil(data.totalHits / pageSize);\n    renderGallery(data.hits);\n    lightbox.refresh();       \n    }\n    \n    catch(err) {\n        console.log(error);\n    }\n    hideLoader();\n    checkBtnStatus();\n    event.target.reset();\n}\n\nasync function onLoadMoreClick() {\n    currentPage += 1;\n    showLoader();\n    try {\n        const data = await getImages(query, currentPage);\n        renderGallery(data.hits);\n     }\n    catch(err) {\n        console.log(error);\n    }\n    checkBtnStatus();\n    hideLoader();\n}\n\nfunction checkBtnStatus(){\n    if (currentPage >= maxPage) {\n        hideLoadMore();\n      iziToast.info({\n      message: \"We're sorry, but you've reached the end of search results.\",\n      position: 'topRight',\n    });\n    } else {\n        showLoadMore();\n}\n}\n\n    \n\n\n\n\n\n"],"names":["getImages","query","currentPage","url","params","axios","imageTemplate","image","imagesTemplate","arr","renderGallery","markup","imageGallery","inputForm","imagePreload","btnLoadMore","maxPage","pageSize","lightbox","SimpleLightbox","showLoadMore","hideLoadMore","showLoader","hideLoader","onFormSubmit","onLoadMoreClick","event","iziToast","data","checkBtnStatus"],"mappings":"owBAEO,eAAeA,EAAUC,EAAOC,EAAa,CAEhD,MAAMC,EAAM,2BACNC,EAAS,CACX,IAAK,qCACL,EAAGH,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMC,EACN,SAAU,EAClB,EAGI,OADY,MAAMG,EAAM,IAAIF,EAAK,CAAE,OAAAC,CAAM,CAAE,GAChC,IACf,CCfA,SAASE,EAAcC,EAAO,CAC1B,MAAO;AAAA,yCAC8BA,EAAM,aAAa;AAAA;AAAA;AAAA;AAAA;AAAA,sBAKtCA,EAAM,YAAY;AAAA,8BACVA,EAAM,aAAa;AAAA,sBAC3BA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA,oCAIIA,EAAM,KAAK;AAAA;AAAA,oCAEXA,EAAM,KAAK;AAAA;AAAA,yCAENA,EAAM,QAAQ;AAAA;AAAA,4CAEXA,EAAM,SAAS;AAAA;AAAA;AAAA,iBAI3D,CAEA,SAASC,EAAeC,EAAK,CACzB,OAAOA,EAAI,IAAIH,CAAa,EAAE,KAAK,EAAE,CACzC,CAEO,SAASI,EAAcD,EAAI,CAC9B,MAAME,EAASH,EAAeC,CAAG,EACjC,QAAQ,IAAIE,CAAM,EAClBC,EAAa,mBAAmB,YAAaD,CAAM,CACvD,CCxBA,MAAME,EAAY,SAAS,cAAc,OAAO,EACnCD,EAAe,SAAS,cAAc,UAAU,EACvDE,EAAe,SAAS,cAAc,SAAS,EAC/CC,EAAc,SAAS,cAAc,WAAW,EAEtD,IAAId,EACAC,EAAc,EACdc,EAAU,EACd,MAAMC,EAAW,GAEXC,EAAW,IAAIC,EAAe,aAAc,CAC9C,aAAc,MACd,aAAc,GAClB,CAAC,EAED,SAASC,GAAe,CACpBL,EAAY,UAAU,OAAO,WAAW,CAC5C,CACA,SAASM,GAAe,CACpBN,EAAY,UAAU,IAAI,WAAW,CACzC,CAEA,SAASO,GAAa,CAClBR,EAAa,UAAU,OAAO,WAAW,CAC7C,CACA,SAASS,GAAa,CAClBT,EAAa,UAAU,IAAI,WAAW,CAC1C,CAGAD,EAAU,iBAAiB,SAAUW,CAAY,EACjDT,EAAY,iBAAiB,QAASU,CAAe,EAErD,eAAeD,EAAaE,EAAM,CAK9B,GAJAA,EAAM,eAAc,EACpBzB,EAAQyB,EAAM,OAAO,SAAS,MAAM,MAAM,OAC1Cd,EAAa,UAAY,GACzBV,EAAc,EACX,CAACD,EAAM,CACN0B,EAAS,MAAM,CACX,MAAO,QACP,SAAU,WACV,MAAO,UACP,aAAc,UACd,SAAU,QACV,OAAQ,KACR,QAAS,wBACrB,CAAS,EACD,MACH,CACD,GAAI,CACAL,IACJ,MAAMM,EAAO,MAAM5B,EAAUC,EAAOC,CAAW,EAC/Cc,EAAU,KAAK,KAAKY,EAAK,UAAYX,CAAQ,EAC7CP,EAAckB,EAAK,IAAI,EACvBV,EAAS,QAAO,CACf,MAEU,CACP,QAAQ,IAAI,KAAK,CACpB,CACDK,IACAM,IACAH,EAAM,OAAO,OACjB,CAEA,eAAeD,GAAkB,CAC7BvB,GAAe,EACfoB,IACA,GAAI,CACA,MAAMM,EAAO,MAAM5B,EAAUC,EAAOC,CAAW,EAC/CQ,EAAckB,EAAK,IAAI,CACzB,MACS,CACP,QAAQ,IAAI,KAAK,CACpB,CACDC,IACAN,GACJ,CAEA,SAASM,GAAgB,CACjB3B,GAAec,GACfK,IACFM,EAAS,KAAK,CACd,QAAS,6DACT,SAAU,UAChB,CAAK,GAEGP,GAER"}